<div class="col-12">
  <div class="card">
    <!-- Toolbar -->
    <p-toolbar styleClass="p-mb-4">
      <ng-template pTemplate="left">
        <h4>Projects</h4>
      </ng-template>
      <ng-template pTemplate="right">
        <button pButton pRipple label="Add New Project" icon="pi pi-plus" class="p-button-primary p-mr-2"
          *ngIf="permission?.CanManageProjects" (click)="addProjectDialog()"></button>
      </ng-template>
    </p-toolbar>
    <!-- dialog -->
    <p-dialog header="Project" [(visible)]="dialog" [modal]="true" showEffect="fade"
      [breakpoints]="{'960px': '70%', '640px': '80%'}" [style]="{width: '80%'}">
      <div class="flex flex-column align-items-center justify-content-center">
        <form [formGroup]="fbproject" (ngSubmit)="onSubmit()" id="Role_roleForm">
          <div class="grid">
            <div class="col-12 roles-container">
              <h5>Project Details</h5>
              <div class="p-fluid p-formgrid grid">
                <div class="field col-12 md:col-4">
                  <label>Code: <sup class="p-error">*</sup>
                  </label>&nbsp; <input pInputText id="code" type="text" formControlName="code" placeholder="Enter Code"
                    #code alphaNumeric />
                </div>
                <div class="field col-12 md:col-4">
                  <label>Name: <sup class="p-error">*</sup>
                  </label>&nbsp; <input pInputText id="name" type="text" formControlName="name" placeholder="Enter Name"
                    #name alphaOnly />
                </div>
                <div class="field col-12 md:col-4">
                  <label>Start Date: <sup class="p-error">*</sup>
                  </label>&nbsp; <p-calendar inputId="calendar" [readonlyInput]="true" [showIcon]="true"
                    [minDate]="minDateVal" placeholder="Enter staring Date" formControlName="startDate"></p-calendar>
                </div>
                <div class="field col-12 md:col-4">
                  <label for="textarea">Description <sup class="p-error">*</sup>
                  </label>&nbsp; <textarea inputId="textarea" rows="3" cols="30" pInputTextarea alphaNumeric
                    placeholder="Enter description" formControlName="description"></textarea>
                </div>

              </div>
              <h5>Client Details</h5>
              <div class="p-fluid p-formgrid grid">
                <div class="field col-12 md:col-4">
                  <label>Company Full Name: <sup class="p-error">*</sup>
                  </label>&nbsp;
                  <p-autoComplete [suggestions]="this.filteredClients" placeholder="Enter Company Full Name"
                    (completeMethod)="filterClients($event)" field="companyName" formControlName="companyName">
                  </p-autoComplete>
                </div>
                <div class="field col-12 md:col-4">
                  <label>Client Name: <sup class="p-error">*</sup>
                  </label>&nbsp;
                  <input pInputText id="name" type="text" placeholder="Enter client name" alphaOnly
                    formControlName="clientName" />
                </div>

                <div class="field col-12 md:col-4">
                  <label>Client Email Id: <sup class="p-error">*</sup>
                  </label>&nbsp;
                  <input pInputText id="name" type="text" placeholder="Enter email address" alphaOnly
                    formControlName="email" />
                </div>
                <div class="field col-12 md:col-4">
                  <label>Client Mobile No: 
                  </label>&nbsp;
                  <input pInputText id="name" type="text" placeholder="Enter mobile number" alphaOnly
                    formControlName="mobileNumber" />
                </div>
                <div class="field col-12 md:col-4">
                  <label>CIN/GST No: <sup class="p-error">*</sup>
                  </label>&nbsp; <input pInputText id="name" type="text" placeholder="Enter CIS/GST No"
                    formControlName="cinno" />
                </div>
                <div class="field col-12 md:col-4">
                  <label>Is Active: <sup class="p-error">*</sup>
                  </label>
                  <br> &nbsp; <p-inputSwitch formControlName="isActive"></p-inputSwitch>
                </div>
                <div class="field col-12 md:col-4">
                  <label>POC Name: <sup class="p-error">*</sup>
                  </label>&nbsp; <input pInputText id="name" type="text" placeholder="Enter POC Name" alphaOnly
                    formControlName="pocName" />
                </div>
                <div class="field col-12 md:col-4">
                  <label>POC Ph.no: <sup class="p-error">*</sup>
                  </label>&nbsp; <input pInputText id="name" type="text" placeholder="Enter poc mobile number"
                    formControlName="pocMobileNumber" />
                </div>
                <div class="field col-12 md:col-4">
                  <label>Address: 
                  </label>&nbsp;
                  <textarea inputId="textarea" rows="3" cols="30" pInputTextarea formControlName="address"
                    placeholder="Enter address"></textarea>
                </div>
              </div>
              <h5>Employee Details</h5>
              <div class="p-fluid p-formgrid grid">
                <div class="field col-12 md:col-4">
                  <label>Employee Id:<sup class="p-error">*</sup></label>&nbsp;
                  <p-multiSelect [options]="employees" formControlName="teamMembers" optionLabel="empname"
                    placeholder="Select Employees">
                  </p-multiSelect>
                </div>
              </div>


              <div class="grid">
                <div class="col-12 md:col-3" *ngFor="let employee of this.fbproject.get('teamMembers').value">
                  <div class="m-2 card border-1 surface-border">
                    <div class="text-xl font-bold">{{employee.empname}}</div>
                    <span class="text-600 font-medium text-sm">
                      EmpId : {{employee.empcode}}
                    </span><br />
                    <span class="text-600 font-medium text-sm">
                      Designation : {{employee.designation}}
                    </span><br />
                  </div>

                </div>
              </div>


            </div>
          </div>
        </form>
      </div>
      <ng-template pTemplate="footer">
        <div class="col-4" style="float:right">
          <button pButton pRipple type="submit" [label]="submitLabel" class="p-button-raised p-button-primary"
            (click)="onSubmit()"></button>
        </div>
      </ng-template>
    </p-dialog>
    <!-- Projects View -->
    <div class=" card">
      <div class="grid mb-5">
        <div class="col-12 md:col-4 mb-5" *ngFor="let project of projects">
          <div class="list-none m-0 p-0 text-center">
            <img
              src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR48WmoKpCBI841stVtt87w_bU3_8hhmDqN7Umdd0UHekFcFqOiv79-_bERRVPi-HmnED4&usqp=CAU"
              alt="img" [style]="{width: '300px'}"
              class="inline-flex align-items-center justify-content-center border-circle w-5rem h-5rem bg-primary-100 mb-5">
            <div class="text-2xl mb-3 font-medium">
              <a class="cursor-pointer" (click)="showDialog(project)">{{project.name}} </a>
              <button pButton pRipple icon="pi pi-pencil" *ngIf="permission?.CanManageProjects"
                class="p-element p-ripple p-button-text p-button-primary p-component m-0 p-0"
                (click)="editProjectDialog()"></button>
            </div>
            <p class="line-height-3 mb-3">{{project.description}}</p>
          </div>
        </div>
      </div>
    </div>
    <!-- Project Details Dialog -->
    <p-dialog header="Project Details" [(visible)]="visible" [style]="{width: '60vw'}">
      <div class="card">
        <div class="grid">
          <div class="col-12 lg:col-3">
            <div class="fex">
              <div class="col text-center">
                <img
                  src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR48WmoKpCBI841stVtt87w_bU3_8hhmDqN7Umdd0UHekFcFqOiv79-_bERRVPi-HmnED4&usqp=CAU"
                  class="w-10 align-items-center border-transparent border-round" />
              </div>
            </div>
          </div>
          <div class="col-12 lg:col-9">
            <div class=" grid " style="text-align: left;">
              <div class="col-12 lg:col-12 "><span class="text-primary font-bold text-900">Project Name</span>:
                {{this.projectDetails.name}}</div>
              <div class="col-12 lg:col-12 "><span class="text-primary font-bold text-900">Project
                  Manager</span>: {{this.projectDetails.manager}} </div>
              <div class="col-12 lg:col-12 "><span class="text-primary font-bold text-900">Project Start
                  Date</span>: {{this.projectDetails.startDate}} </div>
              <div class="col-12 lg:col-12 "><span class="text-primary font-bold text-900">Project
                  Description</span>:<br /> {{this.projectDetails.description}} </div>
            </div>
          </div>
        </div>
        <p-tabView>
          <p-tabPanel header="Client Details ">
            <div class="grid">
              <div class="col-12">
                <div class="card">
                  <ul class="list-none p-0 m-0 text-600 mb-7 text-600">
                    <li class="mb-3">
                      <span class="font-semibold mr-5">Company Full Name :</span>{{this.projectDetails.companyName}}
                    </li>
                    <li class="mb-3">
                      <span class="font-semibold  mr-5">CIN/GST No :</span>{{this.projectDetails.cinno}}
                    </li>
                    <li class="mb-3">
                      <span class="font-semibold  mr-5">POC Name :</span>{{this.projectDetails.pocName}}
                    </li>
                    <li class="mb-3">
                      <span class="font-semibold  mr-5">POC Ph.No :</span>{{this.projectDetails.pocMobileNumber}}
                    </li>
                    <li class="mb-3">
                      <span class="font-semibold  mr-5">Address :</span>{{this.projectDetails.address}}
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </p-tabPanel>
          <p-tabPanel header="Team Members ">
            <div class="grid">

              <div class="col-12 md:col-3" *ngFor="let employee of employees">
                <div class="m-2 card border-1 surface-border">
                  <div class="text-xl font-bold">{{employee.empname}}</div>
                  <span class="text-600 font-medium text-sm">
                    EmpId : {{employee.empcode}}
                  </span><br />
                  <span class="text-600 font-medium text-sm">
                    Designation : {{employee.designation}}
                  </span><br />
                </div>

              </div>
            </div>
          </p-tabPanel>
        </p-tabView>
      </div>
    </p-dialog>

  </div>
</div>