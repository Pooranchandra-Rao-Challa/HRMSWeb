<div class="grid">
    <!-- <p-messages [(value)]="msgs1" class="w-full mx-3" styleClass=" w-full border-round-3xl surface-card font-medium text-color-secondary" [enableService]="false"></p-messages> -->
    <div class="col-12">
        <div class="flex flex-column sm:flex-row align-items-center gap-3 mb-5">
            <div class="flex flex-column align-items-center sm:align-items-start">
                <h4 class="text-800 font-medium m-0 mb-1">Welcome {{ empDetails?.employeeName}}</h4>
                <!-- <p class="text-600 m-0">Your last login was on 01/02/2023 at 10:24 am</p> -->
            </div>
        </div>
        <div class="grid">
            <div class="col-12 md:col-4 lg:col-3">
                <div class="card p-5 orange-200 text-left applicant-p-block-home">
                    <div class="text-center">
                        <div class="avatar_emp_dboard">
                            <img [src]="empDetails?.photo ? empDetails?.photo : defaultPhoto" [alt]="empDetails?.photo"
                                class="shadow-2 my-1 mx-0 employee_profile_pic avatar_emp_dboard" />
                        </div>
                        <br />
                        <h4 class="m-5 mb-2 mt-0 text-primary">{{ empDetails?.employeeName}}</h4>
                    </div>
                    <span class="inline-flex align-items-left mb-2">
                        <i class="pi icon-intersex text-primary text-700 mr-2" pTooltip="Gender"
                            tooltipPosition="top"></i>
                        <span class="text-700 mr-2">{{ empDetails?.gender}}</span>
                    </span><br />
                    <span class="inline-flex align-items-left mb-2">
                        <i class="pi pi-envelope text-primary text-700 mr-2" pTooltip="Email" tooltipPosition="top"></i>
                        <span class="text-700 mr-2">{{ empDetails?.officeEmailId}}</span>
                    </span><br />
                    <span class="inline-flex align-items-left mb-2">
                        <i class="pi pi-mobile text-primary text-700 mr-2" pTooltip="Mobile Number"
                            tooltipPosition="top"></i>
                        <span class="text-700 mr-2">{{ empDetails?.mobileNumber}}</span>
                    </span><br />
                    <span class="inline-flex align-items-left mb-2">
                        <i class="pi pi-calendar text-primary text-700 mr-2" pTooltip="Date Of Birth"
                            tooltipPosition="top"></i>
                        <span class="text-700 mr-2">{{ empDetails?.originalDOB | date:originalDOB}}</span>
                    </span><br />
                    <span class="inline-flex align-items-left mb-2">
                        <i class="pi pi-calendar text-primary text-700 mr-2" pTooltip="Date Of Joining"
                            tooltipPosition="top"></i>
                        <span class="text-700 mr-2">{{ empDetails?.dateofJoin | date:dateOfJoining}}</span>
                    </span><br />
                    <span class="inline-flex align-items-left mb-2" *ngIf=" empDetails?.reportingTo">
                        <i class="pi icon-POC text-700 font-bold text-primary mr-2" pTooltip="Reporting To"
                            tooltipPosition="top"></i>
                        <span class="text-700 text-left mr-2">
                            <span>{{ empDetails?.reportingTo}}</span>
                        </span>
                    </span>
                    <!-- <span class="inline-flex align-items-left mb-2">
                        <i class="pi pi-send text-700 text-primary mr-2" pTooltip="Address"
                            tooltipPosition="top"></i>
                        <span class="text-700 text-left mr-2" *ngFor="let address of empDetails?.empaddress">
                            <span>{{address.addressLine1}}</span>,
                            <span>{{address.addressLine2}}</span>,
                            <span>{{address.city}}</span>,
                            <span>{{address.addressType}}</span>
                        </span>
                    </span> -->
                </div>
            </div>
            <div class="col-12 md:col-8 lg:col-6">
                <div class="grid" style="margin: -1rem">
                    <div class="col-12 sm:col-4">
                        <div class="card text-0 flex justify-content-between pt-4 h-full"
                            style="background-color: var(--primary-color); ">
                            <div class="overview-info">
                                <h6 class="m-0 mb-1 text-0">Academic PL's</h6>
                                <h1 class="m-0 text-0">{{ empDetails?.usedPrivilegeLeavesInYear}}/{{
                                    empDetails?.allottedPrivilegeLeaves}}</h1>
                            </div>
                            <i class="icon-leave-request text-3xl"></i>
                        </div>
                    </div>
                    <div class="col-12 sm:col-4">

                        <div class="card surface-card text-500 flex justify-content-between pt-4 h-full">
                            <div class="overview-info">
                                <h6 class="m-0 mb-1 text-500">Monthly PL's </h6>
                                <h1 class="m-0 text-500">{{ this.monthlyLeaves?.usedPLsInMonth}}</h1>
                                <h1 class="m-0 text-500" *ngIf="this.monthlyLeaves?.usedPLsInMonth === null">0</h1>
                            </div>
                            <div class="d-leave text-center">
                                <div class="mb-2">
                                    {{this.monthlyPLs}}/{{this.yearlyPLs}}
                                </div>
                                <i class="pi pi-angle-left d-leave-font" (click)="gotoPreviousMonthPLs()">
                                </i>
                                <p-calendar styleClass="only-icon" [(ngModel)]="selectedMonth" [showIcon]="true"
                                    view="month" [yearNavigator]="true" yearRange="2000:2030" [readonlyInput]="true"
                                    inputId="monthpicker" (onSelect)="onMonthSelectPLs($event)" pTooltip="Monthly PL's"
                                    tooltipPosition="top">
                                </p-calendar>
                                <i class="pi pi-angle-right d-leave-font" (click)="gotoNextMonthPLs()"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 sm:col-4">

                        <div class="card surface-card text-500 flex justify-content-between pt-4 h-full">
                            <div class="overview-info">
                                <h6 class="m-0 mb-1 text-500">Available PL's</h6>
                                <h1 class="m-0 text-500">{{
                                    empDetails?.allottedPrivilegeLeaves-empDetails?.usedPrivilegeLeavesInYear}}</h1>
                            </div>
                            <i class="pi pi-fw icon-add_leave text-6xl att-pointer" style="color: var(--primary-color);"
                                label="Primary" pTooltip="Apply PL" tooltipPosition="right"
                                (click)="openComponentDialog(employeeleaveDialogComponent, null, ActionTypes.save)"
                                *ngIf="permissions?.CanManageSelfEmployee"></i>
                        </div>
                    </div>

                    <div class="col-12 sm:col-4">
                        <div class="card text-0 flex justify-content-between pt-4 h-full"
                            style="background-color: var(--primary-color); ">
                            <div class="overview-info">
                                <h6 class="m-0 mb-1 text-0">Academic CL's</h6>
                                <h1 class="m-0 text-0">{{ empDetails?.usedCasualLeavesInYear}}/{{
                                    empDetails?.allottedCasualLeaves}}</h1>
                            </div>
                            <i class="icon-leave-request text-3xl"></i>
                        </div>
                    </div>
                    <div class="col-12 sm:col-4">

                        <div class="card surface-card text-500 flex justify-content-between pt-4 h-full">
                            <div class="overview-info">
                                <h6 class="m-0 mb-1 text-500">Monthly CL's </h6>
                                <h1 class="m-0 text-500">{{ this.monthlyLeaves?.usedCLsInMonth}}</h1>
                                <h1 class="m-0 text-500" *ngIf="this.monthlyLeaves?.usedCLsInMonth === null">0</h1>
                            </div>
                            <div class="d-leave text-center">
                                <div class=" mb-2">
                                    {{this.monthlyCLs}}/{{this.yearlyCLs}}
                                </div>
                                <i class="pi pi-angle-left d-leave-font" (click)="gotoPreviousMonthCLs()">
                                </i>
                                <p-calendar styleClass="only-icon" [(ngModel)]="selectedMonth" [showIcon]="true"
                                    view="month" [yearNavigator]="true" yearRange="2000:2030" [readonlyInput]="true"
                                    inputId="monthpicker" (onSelect)="onMonthSelectCLs($event)" pTooltip="Monthly CL's"
                                    tooltipPosition="top">
                                </p-calendar>
                                <i class="pi pi-angle-right d-leave-font" (click)="gotoNextMonthCLs()"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 sm:col-4">

                        <div class="card surface-card text-500 flex justify-content-between pt-4 h-full">
                            <div class="overview-info">
                                <h6 class="m-0 mb-1 text-500">Available CL's</h6>
                                <h1 class="m-0 text-500">{{
                                    empDetails?.allottedCasualLeaves-empDetails?.usedCasualLeavesInYear}}</h1>
                            </div>
                            <i class="pi pi-fw icon-add_leave text-6xl att-pointer" style="color: var(--primary-color);"
                                label="Primary" pTooltip="Apply CL" tooltipPosition="right"
                                (click)="openComponentDialog(employeeleaveDialogComponent, null, ActionTypes.save)"
                                *ngIf="permissions?.CanManageSelfEmployee"></i>
                        </div>
                    </div>


                    <!--  <div class="col-12 sm:col-4">
                        <div class="card text-0 flex justify-content-between pt-4 h-full"
                            style="background-color: #f03030;">
                            <div class="overview-info">
                                <h6 class="m-0 mb-1 text-0">Academic LWP</h6>
                                <h1 class="m-0 text-0">{{empDetails?.usedLWPInYear}}</h1>
                            </div>
                            <i class="icon-leave-request text-3xl"></i>
                        </div>
                    </div>
                    <div class="col-12 sm:col-4">
                        <div class="card surface-card text-500 flex justify-content-between pt-4 h-full">
                            <div class="overview-info">
                                <h6 class="m-0 mb-1 text-500">Monthly LWP</h6>
                                <h1 class="m-0 text-500">{{empDetails?.usedLWPInMonth}}</h1>
                            </div>
                            <div class="d-leave text-center">
                                <div class="mb-2">
                                    {{this.monthlyLWP}}/{{this.yearlyLWP}}
                                </div>
                                <i class="pi pi-angle-left d-leave-font" (click)="gotoPreviousMonthLWP()">
                                </i>
                                <p-calendar styleClass="only-icon" [(ngModel)]="selectedMonth" [showIcon]="true"
                                    view="month" [yearNavigator]="true" yearRange="2000:2030" [readonlyInput]="true"
                                    inputId="monthpicker" (onSelect)="onMonthSelectLWP($event)" pTooltip="Monthly LWP's"
                                    tooltipPosition="top">
                                </p-calendar>
                                <i class="pi pi-angle-right d-leave-font" (click)="gotoNextMonthLWP()"></i>
                            </div>
                        </div>
                    </div> -->
                </div>
            </div>
            <div class="col-12 md:col-6 lg:col-3  ">
                <div class=" p-5 orange-200  applicant-p-block-home">
                    <div class="card-hader flex justify-content-between gap-3 pb-2">
                        <div class="card-title">
                            <h6>Notifications </h6>
                        </div>
                    </div>

                    <p-tabView>

                        <p-tabPanel header="Today Birthdays and Events" class="w-full p-2">

                            <div *ngIf="notifications && notifications?.length > 0; else noBirthdaysTemplate">
                                <div *ngFor="let employee of notifications">
                                    <ul *ngIf="employee.messageType=='Birthday'" class="list-none p-0 overflow-auto"
                                        style="margin: 0 -1.5rem -1rem; max-height: 17.745rem">
                                        <li class="border-round-lg pt-2 px-3 pb-2 mb-3"
                                            (click)="showBirthdayDialog(employee)"
                                            style="background-color: var(--primary-lighter-color)">
                                            <div class="grid ga leav_list m-0 p-0">
                                                <div class="col-4 p-1">
                                                    <p-tag styleClass="m-0 mr-2 px-2 text-xs bg-orange-300 "
                                                        class="inline-block" value="{{employee?.employeeName}}"></p-tag>
                                                </div>
                                                <div class="col-6 p-1">
                                                    <h6 class="line-height-3 m-0 font-medium font-medium ">
                                                        <b>{{employee?.message}}</b>
                                                    </h6>
                                                </div>

                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <ng-template #noBirthdaysTemplate>
                                <li class="border-round-lg pt-2 px-3 pb-2 mb-3"
                                    style="background-color: var(--primary-lighter-color)">
                                    <div class="text-center m-3">
                                        <p class="m-0">Today, there is no employee birthdays or events.</p>
                                    </div>
                                </li>
                            </ng-template>
                        </p-tabPanel>
                        <p-tabPanel header="HR Notifications" class="w-full p-2">

                            <div
                                *ngIf="(notifications && notifications.length > 0) || (notificationReplies && notificationReplies.length > 0); else noHRTemplate">
                                <div *ngFor="let employee of notifications">
                                    <ul *ngIf="employee.messageType=='HR'" class="list-none p-0 overflow-auto"
                                        style="margin: 0 -1.5rem -1rem; max-height: 17.745rem">
                                        <li class="border-round-lg pt-2 px-3 pb-2 mb-3"
                                            style="background-color: var(--primary-lighter-color)">
                                            <div class="grid ga leav_list m-0 p-0">
                                                <div class="col-12 p-1">
                                                    <h6 class="line-height-3 m-0 font-medium font-medium ">
                                                        <b>{{employee?.message}}</b>
                                                    </h6>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <div *ngFor="let employee of notificationReplies">
                                    <ul class="list-none p-0 overflow-auto"
                                        style="margin: 0 -1.5rem -1rem; max-height: 17.745rem">
                                        <li class="border-round-lg pt-2 px-3 pb-2 mb-3"
                                            style="background-color: var(--primary-lighter-color)">
                                            <div class="grid ga leav_list m-0 p-0">
                                                <div class="col-12 p-1">
                                                    <h6 class="line-height-3 m-0 font-medium font-medium ">
                                                        <b>{{employee?.message}}</b>
                                                    </h6>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>


                            <ng-template #noHRTemplate>
                                <li class="border-round-lg pt-2 px-3 pb-2 mb-3"
                                    style="background-color: var(--primary-lighter-color)">
                                    <div class="text-center m-3">
                                        <p class="m-0">There is no HR Notifications.</p>
                                    </div>
                                </li>
                            </ng-template>

                        </p-tabPanel>

                    </p-tabView>
                </div>

            </div>
            <div class="col-12 md:col-6 lg:col-5 p-3">
                <h4 class="m-5 mt-0 mx-0 mb-3">Alloted Assets</h4>
                <div class="applicant-p-block-home">
                    <div class="text-500  text-2xl text-primary text-center m-5 p-5"
                        *ngIf="!empDetails?.assets || empDetails?.assets.length === 0">
                        There is no Assigned Assets for this Employee
                    </div>
                    <div class="grid p-3 mt-3 " *ngIf="empDetails?.assets && empDetails?.assets.length > 0">
                        <div class="col-12 sm:col-4" *ngFor="let asset of empDetails?.assets">
                            <div class="card text-0 p-3  justify-content-between h-full assets_card">
                                <div class="overview-info text-center alloted_assets">
                                    <p class="text-primary "><b>{{asset.assetName}}</b></p>
                                    <ng-container *ngIf="asset.thumbnail">
                                        <div class="project_img_dash">
                                            <img [src]="asset?.thumbnail" [alt]="asset?.thumbnail"
                                                class="shadow-2 employee_profile_pic avatar_emp_dboard" />
                                        </div>
                                    </ng-container>

                                    <div class="text-left text-primary">
                                        <p class="mb-0 mt-2"><b>S/N</b> {{asset.serialNumber}} </p>
                                        <p><b>M/N</b> {{asset.modelNumber}} </p>
                                    </div>

                                    <!-- <h6 class="m-0 mb-1 text-0">

                                    <ng-container>
                                        <span>Asset Name:</span>

                                    </ng-container>
                                    <br>
                                    <ng-container *ngIf="asset.serialNumber">
                                        <span>Serial Number:</span>

                                    </ng-container>
                                    <br>
                                    <ng-container *ngIf="asset.modelNumber">
                                        <span>Model Number:</span>

                                    </ng-container>

                                </h6> -->
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
            <div class="col-12 md:col-6 lg:col-4 p-3">
                <h4 class="m-5 mb-3  mt-0 mx-0 ">Holidays</h4>
                <div class="applicant-p-block-home">
                    <div class="p-3">
                        <p-table id="table" #dtholiday [value]="holidays" dataKey="id" [rows]="10" [rowHover]="true"
                            [alwaysShowPaginator]="false" [paginator]="true"
                            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                            [showCurrentPageReport]="true" paginatorDropdownAppendTo="body" [autoLayout]="true"
                            responsiveLayout="scroll">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th *ngFor="let col of headers">
                                        {{col?.label}}
                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-holiday>
                                <tr>
                                    <td *ngFor="let col of headers"
                                        [ngClass]="{'text-center': col.field === 'isActive', 'text-wrap': col.field === 'description'}">
                                        <span
                                            *ngIf="col?.field != 'fromDate' && col?.field != 'toDate'">{{holiday[col.field]}}</span>
                                        <span *ngIf="col?.field == 'fromDate' || col?.field == 'toDate'">
                                            {{holiday[col.field] |date: mediumDate }}
                                        </span>
                                    </td>

                                </tr>
                            </ng-template>
                            <ng-template pTemplate="emptymessage">
                                <tr>
                                    <td class="md:text-center m-5" colspan="50%">No Holidays Found.</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>

                </div>

            </div>
            <div class="col-12 md:col-6 lg:col-3 p-3">
                <h4 class="m-5 mb-3 mx-0 mt-0 ">Assigned Projects</h4>
                <div class=" card p-3 orange-200  applicant-p-block-home scroll_div" style="min-height:350px;">
                    <div class="text-500  text-2xl text-primary text-center m-5 p-5"
                        *ngIf="!projects || projects.length === 0">
                        There is no Assigned Projects for this Employee
                    </div>
                    <div class="grid" *ngIf="projects && projects.length > 0">
                        <div class="col-6" *ngFor="let project of projects">
                            <div class="card p-2 text-center"
                                [ngStyle]="project.periods.length > 0 ? {'color': 'gray'} : {}">
                                <div class=" project_img_dash ">
                                    <img [src]="project.projectLogo" [alt]="project.projectLogo"
                                        class="shadow-2 my-0 mx-0 employee_profile_pic avatar_projects_dash" />
                                </div>


                                <h5 class="text-primary m-2">{{project.name}}</h5>
                                <div *ngFor="let period of project.periods" class="text-left"
                                    style=" color:gray; border-top:1px solid #ccc; font-size:12px; font-weight: 700;">
                                    <span class="icon-start_time">
                                        <!--{{period.endAt  ? ' - '+period.endAt : "  Continuing"}}-->
                                        {{period.sinceFrom | date: 'yyyy-MM-dd'}} - {{ period.endAt ? (period.endAt |
                                        date: 'yyyy-MM-dd') : "Progress"}}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<p-dialog header="Send Wishes" [(visible)]="wishesDialog" [modal]="true" showEffect="fade"
    [breakpoints]="{'960px': '40%', '640px': '50%'}" class="confirmation_dialog">
    <form [formGroup]="fbWishes">
        <textarea id="wishes" #Wishes rows="3" placeholder="Enter Wishes" pInputTextarea formControlName="message"
            class="freeze_text-area col-12 mb-1" [maxLength]="256">
      </textarea>
    </form>
    <ng-template pTemplate="footer">
        <div style="float:right" class="p-2">
            <button pButton type="button" class="btn btn-primary" label="Send Wishes" (click)="onSubmit()"></button>
        </div>
    </ng-template>
</p-dialog>